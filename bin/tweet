#!/usr/bin/python

import sys
import re
import urllib.request

def usage():
    sys.stderr.write("usage: {0} <url>\n".format(sys.argv[0]))
    sys.exit(1)

try:
    url = sys.argv[1]
except IndexError:
    usage()

title_regex = b'<title.*>(.*?)<\/title>'

content = urllib.request.urlopen(url).read()

# re.DOTALL makes . match newlines
matches = re.search(title_regex, content, re.IGNORECASE | re.DOTALL)
title = matches.group(1).decode('utf-8').replace('\n', '').strip()
sys.stdout.write('{0} - {1}'.format(title, url))
